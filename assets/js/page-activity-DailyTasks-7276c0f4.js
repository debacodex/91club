import{G as E,z as H,r as d,R as V,B as q,$ as oe,C as ie,H as I,az as ce,I as y,Q as r,au as B,J as t,an as D,P as a,O as k,ao as A,K as F,M as J,N as h,aw as U,at as de}from"./common.modules-6670d68a.js";import{m as ue,n as re,A as m,o as ve,p as pe,c as z,g as _e,b as he,R as ge,q as fe,s as ke,t as ye,_ as K,v as we,w as me}from"./page-activity-ActivityDetail-88cfafe3.js";import{E as be}from"./page-activity-Bonus-a2310b32.js";const Te={class:"dailySignIn__container"},$e={class:"task-banner"},Ae={class:"banner-title"},Ie={class:"banner-content"},Ce={class:"task-panel"},De={key:0,class:"task-item"},Ne={class:"task-item-header"},Re={class:"hearder-status new"},Se={class:"headerR"},Pe={class:"task-item-type"},Le={class:"type-title new"},je={class:"type-tip"},ze={class:"task-item-description"},Be={class:"task-item-bottom"},Ge={class:"bottom-title"},Me={class:"task-item-header"},Oe={key:0,class:"task-item-subject"},We={class:"sub-title"},xe={class:"subject"},Ue={class:"schedule"},Ee={class:"subject"},He={class:"schedule"},Ve={key:1,class:"task-item-type"},qe={class:"type-tip"},Fe={class:"task-item-description"},Je={class:"task-item-bottom"},Ke={class:"bottom-title"},Qe=["onClick"],Xe={class:"dialog-window"},Ye={class:"dialog-wrapper"},Ze={class:"dialog-title"},et={class:"dialog-tips"},tt={class:"dialog-content"},at=E({__name:"index",setup(Q){const{t:o}=H(),w=d(!1),g=V(),{ActiveTaskMap:c,ActiveSotre:C,getActive:b}=ue();b();const{downAppTip:T}=re(),f=d(""),N=d("0"),i=d([]),P=d([]),R=d([]),l=q(()=>{let e=[...P.value,...R.value];if(e.length==0)return[];const s=["",2,1,3];e=e.sort((_,$)=>s[_.status]-s[$.status]);const v=e.filter(_=>_.status==1);v.sort((_,$)=>j($.schedule,$.taskTarget)-j(_.schedule,_.taskTarget));const W=e.findIndex(_=>_.status==1);return e.splice(W,v.length,...v),e}),p=async()=>{const e=await m(ke());e&&(P.value=e.data.map(s=>({...s,type:"week"}))||[])},S=async()=>{const e=await m(ye());e&&(R.value=e.data.map(s=>({...s,type:"day"}))||[])},L=async()=>{p(),S()},G=()=>{g.push({name:"activity"})};function j(e,s){return s==0?0:e/s*100}const u=async()=>{i.value.length=0;const e=await m(ve());e!=null&&e.data&&i.value.push(e==null?void 0:e.data)},X=e=>({1:o("goComplete"),2:o("receive"),3:o("claimed")})[e]||"",Y=e=>({1:o("undone"),2:o("complete"),3:o("complete")})[e]||"",Z=e=>({0:o("goComplete"),1:o("receive"),2:o("claimed"),3:o("claimed")})[e]||"",ee=e=>({0:o("undone"),1:o("actTip2"),2:o("claimed"),3:o("complete")})[e]||"",M=d(null),te=async e=>{M.value&&clearTimeout(M.value),M.value=setTimeout(async()=>{if(e.status==1)return se(e);if(e.status==3)return;let s;e.type=="week"?s=await m(ge({weeklyAwardId:e.configId})):e.type=="day"&&(s=await m(fe({dailyAwardId:e.configId}))),s.code===0&&(w.value=!0,N.value=e.taskAwardAmount,f.value=e.taskTitle,L())},100)},O=d(null),ae=async e=>{O.value&&clearTimeout(O.value),O.value=setTimeout(async()=>{if([2,3].includes(e.status))return;if(e.status==0)return await T("Recharge");await m(pe({id:e.id}))&&(w.value=!0,N.value=e.totalNumber==0?"0":(Math.floor(e.amount/e.totalNumber*100)/100).toString(),f.value=e.title,u())},100)},se=async e=>{if(e.taskId=="D20")return e.schedule<e.taskTarget?await T("Recharge"):g.push({name:"home"});if(!c[e.taskId].goPath)return;if(c[e.taskId].homeType&&sessionStorage.setItem("clickedGameType",c[e.taskId].homeType),c[e.taskId].goPath=="Recharge"||c[e.taskId].goPath=="Withdraw")return T(c[e.taskId].goPath);g.push({name:c[e.taskId].goPath})},ne=()=>{g.push({name:"DailyTasks-Record"})};return oe(()=>C.value.isOpenActivityAward,e=>{e&&L()},{immediate:!0}),ie(()=>{u()}),(e,s)=>{var x;const v=I("svg-icon"),W=I("NavBar"),_=I("van-dialog"),$=ce("lazy");return h(),y("div",Te,[r(W,{title:"",placeholder:!1,"left-arrow":"",onClickLeft:G},{right:B(()=>[t("div",{class:"navi-record",onClick:ne},[r(v,{name:"watchCollection"}),t("span",null,a(e.$t("awardsRecord")),1)])]),_:1}),t("div",$e,[t("div",null,[D(`				<img v-lazy="getIconsPublic('activity/DailyTask', 'present')" />`),t("p",null,[t("div",Ae,a(e.$t("actTip1")),1),t("div",Ie,[t("div",null,a(e.$t("awardsTip1")),1),t("div",null,a(e.$t("awardsTip3")),1)])])])]),t("div",Ce,[i.value.length>0?(h(),y("div",De,[t("div",Ne,[t("div",Re,a(e.$t("actTip3")),1),t("span",Se,a(ee((x=i.value[0])==null?void 0:x.status)),1)]),t("div",Pe,[t("div",Le,[r(v,{name:"actNewGift"}),t("div",null,a(i.value[0].title),1)]),t("div",je,a(i.value[0].receivedNumber+"/"+i.value[0].totalNumber),1)]),t("div",ze,a(i.value[0].description),1),t("div",Be,[t("div",null,a(e.$t("awardsAmount")),1),t("div",Ge,[D(` <img v-lazy="getIcons('wallet', 'balance')" /> `),r(v,{name:"activityWallet"}),t("span",null,a(k(z)(i.value[0].amount)),1)])]),t("div",{class:A(["btn btnNew",`status${i.value[0].status}`]),onClick:s[0]||(s[0]=n=>ae(i.value[0]))},a(Z(i.value[0].status)),3)])):D("v-if",!0),(h(!0),y(F,null,J(l.value,(n,le)=>(h(),y("div",{class:"task-item",key:le},[t("div",Me,[t("div",{class:A(["hearder-status",`${n.type}`])},a(n.type=="week"?e.$t("actTip4"):e.$t("dailyMission")),3),t("span",{class:A(n.status==2?"headerR":"headerGray")},a(Y(n.status)),3)]),n.taskId=="D20"?(h(),y("div",Oe,[t("div",We,[r(v,{name:k(c).A1.icon},null,8,["name"]),t("div",null,a(n.taskTitle),1)]),t("div",xe,[t("span",null,a(e.$t("recharge")),1),t("span",Ue,a(n.schedule+"/"+n.taskTarget),1)]),t("div",Ee,[t("span",null,a(e.$t("betting")),1),t("span",He,a(n.scheduleTwo+"/"+n.targetTwo),1)])])):(h(),y("div",Ve,[t("div",{class:A(["type-title",[k(c)[n.taskId].icon]])},[r(v,{name:k(c)[n.taskId].icon},null,8,["name"]),t("div",null,a(n.taskTitle),1)],2),t("div",qe,a(n.schedule+"/"+n.taskTarget),1)])),t("div",Fe,a(n.taskDescribe),1),t("div",Je,[t("div",null,a(e.$t("awardsAmount")),1),t("div",Ke,[r(v,{name:"activityWallet"}),D(` <img v-lazy="getIcons('wallet', 'balance')" /> `),t("span",null,a(k(z)(n.taskAwardAmount)),1)])]),t("div",{class:A(["btn btnOther",`status${n.status}`]),onClick:ut=>te(n)},a(X(n.status)),11,Qe)]))),128))]),r(_,{show:w.value,"onUpdate:show":s[3]||(s[3]=n=>w.value=n),"show-confirm-button":!1,className:"noOverHidden"},{default:B(()=>[t("div",Xe,[t("div",Ye,[U(t("img",null,null,512),[[$,k(_e)("public","succeed")]]),t("div",Ze,a(e.$t("awardsReceived")),1),t("div",et,a(f.value),1),t("div",tt,[r(v,{name:"receivedSuccessfuly"}),D(` <img v-lazy="getIcons('wallet', 'balance')" /> `),t("span",null,a(k(z)(N.value)),1)]),t("div",{class:"dialog-btn",onClick:s[1]||(s[1]=n=>w.value=!1)},a(e.$t("confirm")),1),t("div",{class:"dialog-footer",onClick:s[2]||(s[2]=n=>w.value=!1)},[U(t("img",null,null,512),[[$,k(he)("activity/DailyTask","close")]])])])])]),_:1},8,["show"])])}}});const st=K(at,[["__scopeId","data-v-d7213382"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/views/activity/DailyTasks/index.vue"]]),_t=Object.freeze(Object.defineProperty({__proto__:null,default:st},Symbol.toStringTag,{value:"Module"})),nt={class:"task-record-container"},lt={class:"head"},ot={class:"record-panel van-clearfix"},it={class:"markRed"},ct=E({__name:"index",setup(Q){const{t:o}=H(),w=V(),g=d([]),c=d(!1),C=d(!1),b=d(1),T=d(!1),f=d(1),N=q(()=>T.value?"":o("noMoreThere")),i=async()=>{let l;f.value==1?l=await m(we({pageNo:b.value,pageSize:20})):l=await m(me({pageNo:b.value,pageSize:20})),l?(T.value=l.data.totalCount==0,l.data.totalPage<=b.value?C.value=!0:C.value=!1,l.data.list&&(g.value.push(...l.data.list),g.value.sort((p,S)=>S.createDate-p.createDate)),b.value++):C.value=!0,c.value=!1},P=()=>{w.push({name:"DailyTasks"})};function R(l){f.value=l,b.value=1,g.value.length=0,i()}return(l,p)=>{const S=I("NavBar"),L=I("van-sticky"),G=I("svg-icon"),j=I("van-list");return h(),y("div",nt,[r(S,{title:l.$t("titlePickUpRecord"),placeholder:!1,"left-arrow":"",onClickLeft:P},null,8,["title"]),r(L,{"offset-top":49},{default:B(()=>[t("div",lt,[t("button",{class:A({active:f.value==1}),onClick:p[0]||(p[0]=u=>R(1))},a(l.$t("actTip7")),3),t("button",{class:A({active:f.value==2}),onClick:p[1]||(p[1]=u=>R(2))},a(l.$t("actTip8")),3)])]),_:1}),r(j,{loading:c.value,"onUpdate:loading":p[2]||(p[2]=u=>c.value=u),finished:C.value,"finished-text":N.value,onLoad:i},{default:B(()=>[t("div",ot,[(h(!0),y(F,null,J(g.value,u=>(h(),y("div",{class:"record-panel-item",key:u.status},[t("h1",null,a(f.value==1?l.$t("actTip5"):l.$t("actTip6")),1),t("h2",null,[t("span",null,a(u.taskTitle),1),t("span",it,a(u.taskTarget+"/"+u.taskTarget),1)]),t("div",null,[t("span",null,a(u.createDate),1),t("h3",null,[r(G,{name:"activityWallet"}),t("span",null,a(k(z)(u.awardAmount)),1)])])]))),128))])]),_:1},8,["loading","finished","finished-text"]),T.value?(h(),de(be,{key:0})):D("v-if",!0)])}}});const dt=K(ct,[["__scopeId","data-v-40b81b7f"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/views/activity/DailyTasks/Record/index.vue"]]),ht=Object.freeze(Object.defineProperty({__proto__:null,default:dt},Symbol.toStringTag,{value:"Module"}));export{ht as a,_t as i};
