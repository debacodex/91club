import{G as j,B as E,r as c,R as H,$,C as L,X as G,H as M,I as y,an as b,Q as P,J as u,P as x,O,aB as W,aC as z,N as g,n as J,E as Q,au as X}from"./common.modules-6670d68a.js";import{y as K,cG as Y,_ as U,A as Z,cH as ee}from"./page-activity-ActivityDetail-88cfafe3.js";import{k as te,o as ae}from"./page-turntable-assets-0cfb722e.js";const T=f=>(W("data-v-031a78f2"),f=f(),z(),f),ne={key:0,class:"popuer-gift"},le={class:"gift_content"},se={class:"title"},ie={class:"gift_list"},oe=T(()=>u("div",{class:"activeDiv1 active_item"},null,-1)),ue={key:1,class:"amount"},re=T(()=>u("div",{class:"activeDiv2 active_item"},null,-1)),ve={key:1,class:"amount"},ce=T(()=>u("div",{class:"activeDiv3 active_item"},null,-1)),de={key:1,class:"amount"},fe=T(()=>u("div",{class:"activeDiv4 active_item"},null,-1)),me={key:1,class:"amount"},pe={class:"tip"},_e=j({__name:"popuerGift",props:{visible:{type:Boolean,default:!1}},emits:["update:visible"],setup(f,{emit:p}){function v(i){let t=null;return()=>(t===null&&(t=i().catch(r=>{throw t=null,r})),t)}const e=K(),a=E(()=>e.getDollarSign),d=v(async()=>J(()=>import("./lottie-87732088.js").then(i=>i.l),["assets/js/lottie-87732088.js","assets/js/common.modules-6670d68a.js","assets/css/common-e210f711.css"])),l=c(!1),s=c(null),k=c(null),o=c(null),R=c(null),w=H(),A=()=>{w.back()},{getTurntableReward:I,firstReward:C,firstInvitedWheelDatas:_,isOpenAward:V,restBgcontainer:F}=Y(),n=c([{id:1,isOpen:!1,animat:void 0,amount:0},{id:2,isOpen:!1,animat:void 0,amount:0},{id:3,isOpen:!1,animat:void 0,amount:0},{id:4,isOpen:!1,animat:void 0,amount:0}]),D=E(()=>s.value&&k.value&&o.value&&R.value),B=[s,k,o,R],q=async i=>{if(l.value)return;await I(),l.value=!0,n.value[i-1].amount=C.value;let t=n.value.find(m=>m.id===i);if(n.value[i-1].isOpen=!0,t){const m=await d();t.animat=null;const S=document.getElementsByClassName("activeDiv"+i)[0];t.animat=m.loadAnimation({container:S,renderer:"svg",loop:!1,autoplay:!1,path:te}),t.animat.play(),t.isOpen=!0}let r=n.value.filter(m=>m.id!==i);const h=_.value.filter(m=>!m.isSelected);setTimeout(()=>{r.forEach((m,S)=>{m.animat.play(),m.amount=h[S].amount}),setTimeout(()=>{p("update:visible",!1),F()},1500)},2e3)};return $(()=>D.value,async i=>{if(i){const t=await d();n.value.forEach((r,h)=>{r.animat=t.loadAnimation({container:B[h].value,renderer:"svg",loop:!1,autoplay:!1,path:ae}),r.animat.stop()})}},{immediate:!0}),L(async()=>{}),G(()=>{n.value.forEach(i=>{i.animat&&i.animat.destroy()})}),(i,t)=>{const r=M("van-icon");return f.visible?(g(),y("div",ne,[b(' <svg-icon name="icon_return_01" icon-class="icon_return_01" @click="onClickLeft" /> '),P(r,{class:"icon_return_01",name:"arrow-left",onClick:A}),u("div",le,[u("div",se,[u("span",null,x(i.$t("t578")),1)]),u("div",ie,[u("div",{class:"gift_item",onClick:t[0]||(t[0]=h=>q(1))},[n.value[0].isOpen?b("v-if",!0):(g(),y("div",{key:0,ref_key:"giftRef1",ref:s,class:"item_f"},null,512)),oe,O(V)&&n.value[0].amount?(g(),y("div",ue,[u("span",null,x(a.value+n.value[0].amount),1)])):b("v-if",!0)]),u("div",{class:"gift_item",onClick:t[1]||(t[1]=h=>q(2))},[n.value[1].isOpen?b("v-if",!0):(g(),y("div",{key:0,ref_key:"giftRef2",ref:k,class:"item_f"},null,512)),re,O(V)&&n.value[1].amount?(g(),y("div",ve,[u("span",null,x(a.value+n.value[1].amount),1)])):b("v-if",!0)]),u("div",{class:"gift_item",onClick:t[2]||(t[2]=h=>q(3))},[n.value[2].isOpen?b("v-if",!0):(g(),y("div",{key:0,ref_key:"giftRef3",ref:o,class:"item_f"},null,512)),ce,O(V)&&n.value[2].amount?(g(),y("div",de,[u("span",null,x(a.value+n.value[2].amount),1)])):b("v-if",!0)]),u("div",{class:"gift_item",onClick:t[3]||(t[3]=h=>q(4))},[n.value[3].isOpen?b("v-if",!0):(g(),y("div",{key:0,ref_key:"giftRef4",ref:R,class:"item_f"},null,512)),fe,O(V)&&n.value[3].amount?(g(),y("div",me,[u("span",null,x(a.value+n.value[3].amount),1)])):b("v-if",!0)])]),u("div",pe,x(i.$t("t579")),1)])])):b("v-if",!0)}}});const Fe=U(_e,[["__scopeId","data-v-031a78f2"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/views/turntable/components/popuerGift.vue"]]);function ye(){const f="webkit moz ms o".split(" ");let p=0,v,e;if(typeof window>"u")v=()=>{},e=()=>{};else{v=window.requestAnimationFrame,e=window.cancelAnimationFrame;for(let a=0;a<f.length&&!(v!==void 0&&e!==void 0);a++){const d=f[a];v=v||window[d+"RequestAnimationFrame"],e=e||window[d+"CancelAnimationFrame"]||window[d+"CancelRequestAnimationFrame"]}(!v||!e)&&(v=a=>{const d=new Date().getTime(),l=Math.max(0,16-(d-p)),s=window.setTimeout(()=>{a(d+l)},l);return p=d+l,s},e=a=>{window.clearTimeout(a)})}return G(()=>{e(p)}),{requestAnimationFrame:v,cancelAnimationFrame:e}}const ge={class:"scroll_num"},we=j({__name:"ScrollNum",props:{startVal:{type:Number,required:!0,default:0},endVal:{type:Number,required:!0,default:2e3},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,required:!1,default:(f,p,v,e)=>v*(-Math.pow(2,-10*f/e)+1)*1024/1023+p},repeatAnimation:{type:Number,required:!1,default:void 0}},emits:["onFinish","init"],setup(f,{expose:p,emit:v}){const e=f,{requestAnimationFrame:a,cancelAnimationFrame:d}=ye(),l=t=>{t=t.toFixed(e.decimals);const[r,h]=t.split("."),m=h?e.decimal+h:"",S=/(\d+)(\d{3})/;let N=r;for(;S.test(N);)N=N.replace(S,"$1"+e.separator+"$2");return e.prefix+N+m+e.suffix},s=c(e.startVal),k=c(l(e.startVal)),o=c(null),R=c(!1),w=c(e.duration),A=c(null),I=c(null),C=c(null),_=c(null),V=E(()=>e.startVal>e.endVal),F=()=>{s.value=e.startVal,A.value=null,w.value=e.duration,R.value=!1,_.value=a(i)},n=()=>{_.value!==null&&d(_.value)},D=()=>{A.value=null,w.value=C.value!==null?C.value:e.duration,s.value=o.value!==null?o.value:e.startVal,_.value=a(i)},B=()=>{R.value?D():n(),R.value=!R.value},q=()=>{A.value=null,_.value!==null&&d(_.value),k.value=l(e.startVal)},i=t=>{A.value||(A.value=t),I.value=t;const r=t-A.value;C.value=w.value-r,e.useEasing?V.value?o.value=s.value-e.easingFn(r,0,s.value-e.endVal,w.value):o.value=e.easingFn(r,s.value,e.endVal-s.value,w.value):V.value?o.value=s.value-(s.value-e.endVal)*(r/w.value):o.value=s.value+(e.endVal-s.value)*(r/w.value),V.value?o.value=o.value<e.endVal?e.endVal:o.value:o.value=o.value>e.endVal?e.endVal:o.value,k.value=l(o.value),r<w.value?_.value=a(i):v("onFinish")};return $(()=>e.startVal,()=>{e.autoplay&&F()}),$(()=>e.endVal,()=>{e.autoplay&&F()}),$(()=>e.repeatAnimation,t=>{t?setInterval(()=>{F()},t):n()},{immediate:!0}),L(()=>{e.autoplay&&F(),v("init")}),Q(()=>{_.value!==null&&d(_.value)}),p({start:F,pause:n,resume:D,pauseResume:B,reset:q}),(t,r)=>(g(),y("span",ge,x(k.value),1))}});const qe=U(we,[["__scopeId","data-v-653b796f"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/views/turntable/components/ScrollNum.vue"]]),he={class:"header"},be={class:"content"},ke=["innerHTML"],Re=j({__name:"Rule",props:{visible:{type:Boolean,default:!1}},emits:["update:visible"],setup(f,{emit:p}){const v=f,e=c(!1),a=c(""),d=async()=>{try{const l=await Z(ee());l.code===0?a.value=l.data:a.value=""}catch(l){console.error("Error fetching rules:",l),a.value=""}};return $(()=>v.visible,l=>{e.value=l,l&&!a.value&&d()},{immediate:!0}),(l,s)=>{const k=M("van-dialog");return g(),y("div",null,[P(k,{show:e.value,"onUpdate:show":s[0]||(s[0]=o=>e.value=o),"confirm-button-text":l.$t("ok"),onConfirm:s[1]||(s[1]=o=>p("update:visible",!1))},{default:X(()=>[u("div",he,x(l.$t("rule")),1),u("div",be,[u("div",{class:"duan",innerHTML:a.value},null,8,ke)])]),_:1},8,["show","confirm-button-text"])])}}});const Se=U(Re,[["__scopeId","data-v-ba98b202"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/views/turntable/components/Rule.vue"]]);export{Fe as P,Se as R,qe as S};
