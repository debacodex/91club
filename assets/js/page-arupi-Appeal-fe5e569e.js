import{G as q,av as O,H as T,at as N,au as k,O as u,Z as A,ay as X,N as L,J as s,ao as R,aq as Y,P as m,r as I,z as G,A as ee,B as se,I as E,aA as U,Q as g,an as B,t as H,u as x,aB as J,aC as Q,q as F,R as te,C as ae,a8 as oe,a1 as le,F as ne}from"./common.modules-6670d68a.js";import{ac as Z,_ as z,ad as K,y as ie,ae as D,af as de,ag as P,ah as re,ai as ue,aj as ce}from"./page-activity-ActivityDetail-88cfafe3.js";function pe(a,w){let c={headers:{"Content-Type":a.file.type}};return new Promise((_,r)=>{Z.put(w,a.file,c).then(n=>{n&&_(n)}).catch(n=>{r(n)})})}function ve(a){return Z.post("/ar-wallet/v4/apiCenter/generateFileUrl",a)}const me=q({__name:"vsImgVideo",props:{show:{type:Boolean,default:!1,required:!0},auto:{type:Boolean,default:!1},contentClass:{type:String,default:""},btnText:{type:String,default:""}},emits:["update:show","close"],setup(a,{emit:w}){const c=a,{show:_}=O(c,w);return(r,n)=>{const h=T("van-popup");return L(),N(h,{show:u(_),"onUpdate:show":n[1]||(n[1]=f=>A(_)?_.value=f:null),round:"",style:X([{width:"80%"},{height:a.auto?"auto":"80%"}])},{default:k(()=>[s("div",{class:R(["vsImgVideo",a.contentClass])},[s("div",{class:R(["con",{auto:a.auto}])},[Y(r.$slots,"default",{},void 0,!0)],2),s("div",{class:"cmdB",onClick:n[0]||(n[0]=()=>{_.value=!1,w("close")})},m(a.btnText||r.$t("close")),1)],2)]),_:3},8,["show","style"])}}});const M=z(me,[["__scopeId","data-v-14975d3c"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/components/ArUPI/vsImgVideo.vue"]]),fe=a=>(J("data-v-d588317f"),a=a(),Q(),a),ge={class:"updaloadImage"},_e={class:"img"},he={class:"title mb12 x-row x-row-between x-row-middle"},we=fe(()=>s("span",{style:{color:"#EE4D4D"}},"*",-1)),ye={class:"uploadImg x-row x-column x-row-middle-center"},Ie={class:"tip-p mt5 pb10"},be={class:"img video"},Ve={class:"title mb12 x-row x-row-between x-row-middle"},Ue={class:"uploadImg x-row x-column x-row-middle-center"},Te={key:0,class:"videoBox"},$e=["src"],xe=["src"],Le={controls:""},Se=["src"],ke=["src"],Ce=["src"],je=q({__name:"uploadImage",props:{fileListImg:{type:null,required:!0},fileListVideo:{type:null,required:!0},readonly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!0,default:!1}},emits:["update:fileListImg","update:fileListVideo"],setup(a,{emit:w}){const c=a,{goMerchant:_}=K(),r=I(!1),n=I(""),{localStore:h}=re(),{fileListImg:f,fileListVideo:d}=O(c,w),{t:b}=G(),j=ie(),y=ee({baseUrl:"",signedUrl:""}),C=()=>{r.value=!1,y.baseUrl="",d.value=[],n.value=""},o=I(!1),l=I(!1),i=async(t,e)=>{const V=H({message:b("upLoaderL"),forbidClick:!0,duration:0,overlay:!0}),$=de()+"."+P(t.file.type);try{const S=h.get("ar_p_t")||"",v=await ve({token:S,objectName:$,contentType:t.file.type});v.code==="1"&&(y.baseUrl=v.data.baseUrl,y.signedUrl=v.data.signedUrl,await pe(t,v.data.signedUrl)?(t.file.objectName=$,t.file.objectSuffix=P(t.file.type),(e==null?void 0:e.name)===2&&(n.value=$,r.value=!0)):(x(v.msg),setTimeout(()=>{_()},1500)))}catch{}finally{V.close()}},p=se(()=>[D("vsImg","jpg"),`${j.getOSSUrl}/vsvideo/vsVideo.mp4`]);return(t,e)=>{const V=T("van-image"),$=T("van-uploader"),S=T("van-icon");return L(),E("div",ge,[s("div",_e,[s("div",he,[s("h1",null,[we,U(m(t.$t("sellTip13",[u(f).length])),1)]),s("div",{class:"right",onClick:e[0]||(e[0]=()=>o.value=!0)},m(t.$t("vsImg")),1)]),g($,{disabled:t.disabled,"after-read":i,modelValue:u(f),"onUpdate:modelValue":e[1]||(e[1]=v=>A(f)?f.value=v:null),"max-count":3,"max-size":5e3*1024,onOversize:e[2]||(e[2]=()=>u(F)(t.$t("sellTip14"))),accept:"image/*",readonly:t.readonly,name:1},{default:k(()=>[s("div",ye,[g(V,{width:"25",height:"25",fit:"cover",src:u(D)("updateImg")},null,8,["src"]),U(" "+m(t.$t("uploadImage")),1)])]),_:1},8,["disabled","modelValue","readonly"]),s("div",Ie,[g(S,{name:"warning",color:"#F63E3E",class:"img"}),U(" "+m(t.$t("sellTip15")),1)])]),s("div",be,[s("div",Ve,[s("h1",null,m(t.$t("sellTip16",[u(d).length])),1),s("div",{class:"right",onClick:e[3]||(e[3]=()=>l.value=!0)},m(t.$t("vsVideo")),1)]),U(" "+m(n.value)+" ",1),g($,{disabled:t.disabled,"after-read":i,modelValue:u(d),"onUpdate:modelValue":e[4]||(e[4]=v=>A(d)?d.value=v:null),"max-count":1,"max-size":5e4*1024,onOversize:e[5]||(e[5]=()=>u(F)(t.$t("sellTip17"))),accept:"video/*",readonly:t.readonly,name:2,"preview-image":!1},{default:k(()=>[s("div",Ue,[g(V,{width:"25",height:"25",fit:"contain",src:u(D)("video1")},null,8,["src"]),U(" "+m(t.$t("UploadVideo")),1)])]),_:1},8,["disabled","modelValue","readonly"]),r.value||u(d).length>0?(L(),E("div",Te,[s("div",{class:"del",onClick:C},[g(S,{class:"icon",name:"cross"})]),s("video",{class:"v",controls:"",src:u(d)[0].url?u(d)[0].url:(y==null?void 0:y.baseUrl)+n.value},null,8,$e)])):B("v-if",!0)]),o.value?(L(),N(M,{key:0,show:o.value,"onUpdate:show":e[6]||(e[6]=v=>o.value=v)},{default:k(()=>[s("img",{src:p.value[0]},null,8,xe)]),_:1},8,["show"])):B("v-if",!0),l.value?(L(),N(M,{key:1,show:l.value,"onUpdate:show":e[7]||(e[7]=v=>l.value=v)},{default:k(()=>[s("video",Le,[s("source",{src:p.value[1],type:"video/ogg"},null,8,Se),s("source",{src:p.value[1],type:"video/mp4"},null,8,ke),s("source",{src:p.value[1],type:"video/webm"},null,8,Ce)])]),_:1},8,["show"])):B("v-if",!0)])}}});const Be=z(je,[["__scopeId","data-v-d588317f"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/components/ArUPI/uploadImage.vue"]]),W=a=>(J("data-v-a2909dfe"),a=a(),Q(),a),De={class:"appeal"},Ne={class:"appealTip"},Ae={class:"title"},Re=W(()=>s("h1",null,[s("span",{style:{color:"#EE4D4D"}},"*"),U(" UTR(UPI Ref.ID)")],-1)),Ee=W(()=>s("span",{style:{color:"#EE4D4D"}},"*",-1)),qe=q({__name:"index",setup(a){const{goMerchant:w}=K(),{t:c}=G(),_=te(),r=I("");function n(){_.push({name:"kycAppeal"})}const h=I([]),f=I([]);ae(()=>{j()});const d=I(!1),b=I(),j=async()=>{const o=await ue({});if(o.code==="1"){const{existAppeal:l,appealReason:i,images:p,video:t,url:e}=o.data;d.value=l,r.value=i,b.value=e,h.value=p?p.split(",").map(V=>({url:V})):[],f.value=t?t.split(",").map(V=>({url:V})):[]}else x(o.msg),setTimeout(()=>{w()},1500)},y=o=>o.map(i=>{if(i.url)return i.url.split("/").pop();if(i.file&&i.file.objectName)return i.file.objectName}),C=oe(async()=>{if(d.value)return;if(!b.value||b.value.length<12)return x(c("formatIncorrect"));if(!r.value)return x(c("sellTip3"));if(h.value.length<1)return x(c("sellTip15"));await le({title:c("notice"),message:c("appealTip")});const o=H({message:c("submitting"),forbidClick:!0,duration:0,overlay:!0});let l=[],i=[];h.value.length>0&&(l=y(h.value)),f.value.length>0&&(i=y(f.value));try{const p=await ce({appealReason:r.value,video:i?i[0]:"",images:l.join(","),utr:b.value});setTimeout(()=>{o.close()},2e3),p.code==="1"?ne({message:c("SubmittedS"),wordBreak:"break-word"}):x(p.msg),setTimeout(()=>{w()},1500)}catch{o.close()}},1e3);return(o,l)=>{const i=T("NavBar"),p=T("van-icon"),t=T("van-field");return L(),E("div",De,[g(i,{title:o.$t("Appeal"),placeholder:!1,"left-arrow":"",onClickLeft:n},null,8,["title"]),s("div",Ne,[s("div",Ae,[g(p,{name:"warning",class:"img",size:"14"}),U(m(o.$t("notice")),1)]),s("p",null,m(o.$t("appealTip")),1)]),Re,g(t,{disabled:d.value,modelValue:b.value,"onUpdate:modelValue":l[0]||(l[0]=e=>b.value=e),modelModifiers:{trim:!0},label:"",type:"text",maxlength:"12",placeholder:o.$t("enterUtr")},null,8,["disabled","modelValue","placeholder"]),s("h1",null,[Ee,U(" "+m(o.$t("ReasonFAppeal")),1)]),g(t,{disabled:d.value,modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),modelModifiers:{trim:!0},rows:"2",label:"",type:"textarea",maxlength:"60","show-word-limit":"",placeholder:o.$t("sellTip3")},null,8,["disabled","modelValue","placeholder"]),g(Be,{disabled:d.value,fileListImg:h.value,"onUpdate:fileListImg":l[2]||(l[2]=e=>h.value=e),fileListVideo:f.value,"onUpdate:fileListVideo":l[3]||(l[3]=e=>f.value=e)},null,8,["disabled","fileListImg","fileListVideo"]),s("div",{class:R(["cmdBth mt16 x-row x-row-middle-center",d.value?"":"active"]),onClick:l[4]||(l[4]=(...e)=>u(C)&&u(C)(...e))},m(o.$t("selltip4")),3)])}}});const ze=z(qe,[["__scopeId","data-v-a2909dfe"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/views/arupi/Appeal/index.vue"]]),Oe=Object.freeze(Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"}));export{ve as P,M as V,Oe as i,pe as u};
