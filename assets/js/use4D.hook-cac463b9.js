import{a4 as Ft,A as h,d_ as Ht,d$ as $t,e0 as zt,e1 as Ut,e2 as qt,e3 as Jt,e4 as Kt,e5 as Xt,e6 as Zt,e7 as te}from"./page-activity-ActivityDetail-88cfafe3.js";import{r,A as ee,w as $,z as ae,B as u,E as ne,u as A}from"./common.modules-6670d68a.js";const z=r(!1),S=r(!1),U=r(0),R=r(),q=r();function oe(){const e=ee({timeVal:$().format("YYYY-MM-DD"),timeIndex:0,lotteryList:[],lotteryTab:[],tabId:1,rollNum:0,betQuantity:0,betAmount:0,totalAmount:0,betType:[],betTypeList:[],betPay:1,betPayList:[],dupleList:[{list:[]},{list:[]},{list:[]},{list:[]}],allActive:[],banbetpay:0,multipleList:[1,5,10,20,50,100],betAmountList:[10,50,100,500,1e3,5e3],duplex:!1,balance:0,stopTime:null}),{t:c}=ae(),{setLoading:m}=Ft(),y=r(""),g=r(1),w=r(!0),J=r(!1),x=r(!1),D=r([{}]),M=r(),k=r(),K=[{name:c("xosoTxt90"),type:0},{name:c("xosoTxt89"),type:1},{name:c("xosoTxt88"),type:2},{name:c("xosoTxt87"),type:3}],X=u(()=>e.timeVal),Z=u(()=>e.timeIndex),tt=u(()=>e.lotteryList),et=u(()=>e.lotteryTab),at=u(()=>e.tabId),nt=u(()=>e.rollNum),lt=u(()=>e.betType),st=u(()=>e.betTypeList),ot=u(()=>e.betPay),it=u(()=>e.betPayList),ut=u(()=>e.betAmount),ct=u(()=>e.totalAmount),yt=u(()=>e.betQuantity),bt=u(()=>e.banbetpay),pt=u(()=>e.dupleList),rt=u(()=>e.allActive),mt=u(()=>e.multipleList),dt=u(()=>e.betAmountList),ft=u(()=>e.duplex),gt=u(()=>e.balance),Tt=t=>{const a=[c("Sunday"),c("Monday"),c("Tuesday"),c("Wednesday"),c("Thursday"),c("Friday"),c("Saturday")],n=new Date(t);return a[n.getDay()]},ht=(t,a)=>{e.timeIndex=a,e.timeVal=t.date,I(1),z.value=!1},vt=(t,a)=>{if(e.lotteryList.includes(t.type)){let n=e.lotteryList.indexOf(t.type);e.lotteryList.splice(n,1)}else e.lotteryList.push(t.type);d(e.betType.length,e.betAmount,e.betPay)},Lt=t=>{e.tabId=t,I(0)},I=t=>{y.value="",e.betPay=1,e.rollNum=0,e.betType.length=0,e.betAmount=e.betAmountList[0],e.dupleList.forEach(a=>a.list=[]),e.allActive.length=0,g.value=1,B(),x.value=!1,t==1&&(e.lotteryList.length=0)},B=()=>{e.totalAmount=0,e.betQuantity=0,e.banbetpay=0},At=()=>{if(e.rollNum>=2||y.value.length>=4)return A(c("EnterTip"));e.betPay=5,y.value+="R",e.rollNum=j(y.value.split("")),d(e.betType.length,e.betAmount,e.betPay)},Pt=t=>{y.value=t.target.value,y.value==""&&(e.betPay=1),y.value.length!==4?B():Y(t.target.value)?(d(e.betType.length,e.betAmount,e.betPay),e.banbetpay=N(y.value),e.banbetpay===1&&(e.betPay=1)):(y.value="",e.betPay=1,A(c("FormatTip1"))),e.rollNum=j(y.value.split(""))},xt=t=>{if(t.target.value==""||t.target.value.length!==4)return;Y(t.target.value)||(y.value="",e.betPay=1,A(c("FormatTip1")))},Y=t=>/^[0-9]{4}|\R[0-9]{3}|[0-9]{1}\R[0-9]{2}|[0-9]{2}\R[0-9]{1}|\R[0-9]{2}\R|[0-9]{2}\R{2}|\R{2}[0-9]{2}|[0-9]{3}\R|[0-9]\R{2}[0-9]|[0-9]\R[0-9]\R|\R[0-9]\R[0-9]$/.test(t),j=t=>{let a=t.indexOf("R"),n=0;for(;a!==-1;)n++,a=t.indexOf("R",a+1);return n},It=t=>{const{betType:a,betAmount:n,betPay:l}=e;if(a.includes(t)){let o=a.indexOf(t);a.splice(o,1)}else a.push(t);d(a.length,n,l)},Nt=t=>{e.betPay=t,d(e.betType.length,e.betAmount,t)},Rt=t=>{e.betAmount=t,d(e.betType.length,t,e.betPay)},d=(t,a,n)=>{let{tabId:l,dupleList:o,lotteryList:s}=e;if(l===1){if(y.value.length!==4)return!1;E(t,a,y.value,n)}else if(L(o))e.betQuantity=C(o)*s.length*e.betType.length,e.totalAmount=e.betQuantity*a*s.length*g.value;else{const p=o.map(i=>i.list[0]).join("");if(p.length!==4)return;e.banbetpay=N(p),E(t,a,p,n)}},E=(t,a,n,l)=>{let{rollNum:o,lotteryList:s}=e,p=t*a*s.length*g.value,i=t*s.length,b=0,f=0;if(l===1||l===2)b=p,f=i;else if(l===3){const v=N(n);b=p*v,f=i*v}else if(l===4){const v=wt(n);b=p*(v?1:2),f=i*(v?1:2)}else l===5&&(b=p*(o>0?o==1?10:10*10:0),f=i*(o>0?o==1?10:10*10:0));e.totalAmount=b,e.betQuantity=f},wt=t=>t===t.split("").reverse().join("");function N(t){function a(i){return i<=1?1:i*a(i-1)}let n=t.split("").map(Number),l=[...new Set(n)],o=a(n.length),s=1;for(const i of l){const b=n.filter(f=>f===i).length;s*=a(b)}return o/s}const Dt=t=>{const{dupleList:a,allActive:n,betType:l,betAmount:o}=e;if(a[t].list=[],n.includes(t)){let s=n.indexOf(t);n.splice(s,1)}else{n.push(t);for(let s=0;s<10;s++)a[t].list.push(s)}V(),d(l.length,o)},Bt=(t,a)=>{const{dupleList:n,allActive:l,betType:o,betAmount:s,betPay:p}=e,i=n[t].list;if(i.includes(a)){let b=i.indexOf(a);i.splice(b,1)}else i.push(a);if(i.length===10)l.push(t);else if(l.includes(t)){let b=l.indexOf(t);l.splice(b,1)}if(V(),C(n)>0){if(d(o.length,s,p),C(n)===1){const b=n.map(f=>f.list[0]).join("");e.banbetpay=N(b)}e.banbetpay===1&&(e.betPay=1)}else L(n)?e.banbetpay=L(n)?1:0:B()},V=()=>{const{dupleList:t}=e;e.duplex=L(t),e.banbetpay=L(t)?1:0,L(t)&&(e.betPay=1)};function L(t){for(let a=0;a<t.length;a++){const n=t[a].list;if(Array.isArray(n)&&n.length>1)return!0}return!1}function C(t){let a=1;return t.forEach((n,l)=>{a*=n.list.length}),a}const Ct=()=>{x.value=!0},Ot=t=>{const{betType:a,betAmount:n,betPay:l}=e;switch(t){case 1:g.value>1&&g.value--;break;case 2:g.value++;break}d(a.length,n,l)},Qt=t=>{const{betType:a,betAmount:n,betPay:l}=e;g.value=t.target.value,d(a.length,n,l)},Gt=t=>{const{betType:a,betAmount:n,betPay:l}=e;g.value=t,d(a.length,n,l)},St=t=>{w.value=t},Mt=()=>{const{lotteryList:t,lotteryTab:a,timeIndex:n,tabId:l,betPay:o,betType:s,betQuantity:p,betAmount:i,dupleList:b,totalAmount:f,balance:v}=e;if(f>v)return A(c("wfDesc3"));if(p/t.length>7e3)return A(c("d4BetTip",[7e3]));if(!w.value)return A(c("agreePresaleRules"));let T={};T.type=t,T.gameType=o;let O="";l===1?O=y.value:O=b.map(Q=>Q.list.sort((P,G)=>P-G).join(",")).join("|"),T.betContent=O,T.betType=s,T.betMethod=l,T.betNumber=p,T.multiple=Number(g.value),T.amount=i,T.issueNumber=t.map(Q=>{const P=a[n].games.find(G=>G.type===Q);return P==null?void 0:P.issueNumber}),x.value=!1,Yt(T),W()},W=()=>{setTimeout(()=>{S.value=!1},1500)},_=async()=>{const t=await h(Ht());t!=null&&t.data&&(e.balance=(t==null?void 0:t.data.amount)||0)},kt=async()=>{const t=await h($t());t!=null&&t.data&&(e.multipleList=(t==null?void 0:t.data.betMultiplier)||[],e.betAmountList=(t==null?void 0:t.data.betAmount)||[],e.betTypeList=(t==null?void 0:t.data.betType)||[],e.betPayList=(t==null?void 0:t.data.gameType)||[],e.betAmount=(t==null?void 0:t.data.betAmount[0])||0)},F=async()=>{m(!0);const t=await h(zt());t!=null&&t.data&&(e.timeVal=t.data[e.timeIndex].date,e.lotteryTab=(t==null?void 0:t.data)||[]),m(!1)},Yt=async t=>{const a=await h(Ut(t));(a==null?void 0:a.code)===0?(S.value=!0,_(),U.value===1&&H({pageSize:10,pageNo:1,type:0,date:$(new Date).format("YYYY-MM-DD")+" 00:00:00"}),W()):F(),I(1)},jt=async()=>{m(!0),D.value.length=0;const t=await h(qt());t!=null&&t.data&&(t==null||t.data.forEach(a=>{let n=[],l=[],o=[];a.items.forEach(s=>{s.playId.split("_").length==1?o.push({...s,code:s.playId}):(s.playId.split("_")[0]=="1"&&n.push({...s,code:s.playId.split("_")[1]}),s.playId.split("_")[0]=="2"&&l.push({...s,code:s.playId.split("_")[1]}))}),D.value.push({playTypeId:a.playTypeId,playTypeTitle:a.playTypeTitle,lists:[{type:1,list:n},{type:2,list:l},{type:3,list:o}]})})),m(!1)},Et=async()=>{if(R.value)return;m(!0);const t=await h(Jt());t!=null&&t.data&&(R.value=t.data.map(a=>(a.typeName=c(`d4LType${a.typeId}`),a)),R.value.unshift({typeId:0,typeName:c("all")})),m(!1)},H=async t=>{m(!0);const a=await h(Kt(t));a!=null&&a.data&&(q.value=(a==null?void 0:a.data)||{}),m(!1)},Vt=async()=>{m(!0);const t=await h(Xt());t!=null&&t.data&&(M.value=(t==null?void 0:t.data)||[]),m(!1)},Wt=async t=>{m(!0);const a=await h(Zt(t));a&&(k.value=(a==null?void 0:a.data)||{}),m(!1)},_t=async t=>{const a=await h(te(t));return new Promise(async(n,l)=>{a?n(a):l(a)})};return ne(()=>{clearInterval(e.stopTime)}),{tabList:K,getTimeWeek:Tt,onTime:ht,lotterTab:vt,onTab:Lt,getClear:I,onRoll:At,getInput:Pt,getBlur:xt,onBetType:It,onBetpay:Nt,onAmount:Rt,onClickBet:Ct,addNumber:Bt,allAddnum:Dt,onStepper:Ot,changeStep:Qt,onMltiple:Gt,checkboxChange:St,onBet:Mt,getWinsUserAmount:_,getGameConfig:kt,getGameIssue:F,getOddsList:jt,getTypeList:Et,getMy4DHistory:H,get4DResult:Vt,gameResultByType:Wt,gameCancelOrder:_t,gameListIndex:U,timeVal:X,lotteryTab:et,timeIndex:Z,lotteryList:tt,timeShow:z,betShow:x,tabId:at,rollNum:nt,banbetpay:bt,num:y,betType:lt,betTypeList:st,betPay:ot,betPayList:it,count:ut,totalAmount:ct,betQuantity:yt,allActive:rt,dupleList:pt,countVal:g,checked:w,preSaleRule:J,multipleList:mt,betAmountList:dt,duplex:ft,balance:gt,promptShow:S,oddsList:D,typeList:R,myHistory:q,newGameResult:M,gameResultByTypeO:k}}export{oe as u};
