import{G as I,R as F,r as u,C as q,H as b,I as w,Q as s,J as n,aA as y,P as f,O as x,K as A,M as H,an as M,aB as O,aC as R,N as m,u as V}from"./common.modules-6670d68a.js";import{aA as G,aB as v,aC as k,A as D,aD as T,aE as J,N as K}from"./page-activity-ActivityDetail-88cfafe3.js";const Q=l=>(O("data-v-887c2eae"),l=l(),R(),l),W={class:"download-center"},j=Q(()=>n("div",{class:"banner"},null,-1)),z=["onClick"],X=["src"],Y={class:"text"},ne=I({__name:"index",setup(l){const{PWA:h}=G(),t=F(),E=()=>{t.back()},i=u(""),_=u([]),r=u(null),c=u(null),g="ar048",d=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,N=()=>{if(window.gtag&&window.gtag("event","quick_down_click"),v()){k(`${window.location.origin}/download/${g}/quick.apk`);return}d?t.push("/downloadCenter/ios"):h.value.canIUse?h.value.download&&h.value.download():U()},U=async()=>{const e=`${window.location.origin}/download/${g}/quick.apk`;try{if(!(await fetch(e,{method:"HEAD",cache:"no-store"})).ok)throw new Error("File not found");if(v()){k(e);return}const o=document.createElement("a");o.href=e,o.download="quick.apk",document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(a){console.error("Download failed:",a),t.push("/downloadCenter/empty")}},L=async()=>{let e=`${window.location.origin}/download/${g}/full.apk`;if(d)if(i.value){window.open(i.value,"_blank");return}else{t.push("/downloadCenter/empty");return}try{if(!(await fetch(e,{method:"HEAD",cache:"no-store"})).ok)throw new Error("File not found");if(window.gtag&&window.gtag("event","full_down_click"),v()){k(e);return}const o=document.createElement("a");o.href=e,o.download="full.apk",document.body.appendChild(o),o.click(),document.body.removeChild(o)}catch(a){console.error("Download failed:",a),t.push("/downloadCenter/empty")}},$=async e=>{if(!/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){if(v()){k(e);return}window.open(e,"_blank");return}else{V(K.global.t("downloadFileiOSError"));return}},S=()=>{r.value&&c.value&&(r.value.classList.toggle("open"),r.value.classList.contains("open")?c.value.className="app-list open":c.value.className="app-list")},P=async()=>{const e=await D(T());e.data.iosUrl?i.value=e.data.iosUrl:i.value=""},B=async()=>{const e=await D(J());e.data&&Array.isArray(e.data)&&(_.value=e.data)};return q(()=>{B(),d&&P()}),(e,a)=>{const o=b("NavBar"),p=b("svg-icon");return m(),w(A,null,[s(o,{title:e.$t("e1"),"left-arrow":"",onClickLeft:E},null,8,["title"]),n("div",W,[j,n("div",{class:"btn1",onClick:N},[s(p,{name:"ac_fast"}),y(f(e.$t("e2")),1)]),n("div",{class:"btn2",onClick:L},[s(p,{name:"ac_download"}),y(f(e.$t("e3")),1)]),!x(d)&&_.value.length?(m(),w(A,{key:0},[n("div",{class:"btn3 open",ref_key:"btn3",ref:r,onClick:S},[s(p,{name:"ac_private"}),y(" "+f(e.$t("e8"))+" ",1),s(p,{class:"down",name:"ac_down"})],512),n("div",{class:"app-list open",ref_key:"appListDiv",ref:c},[(m(!0),w(A,null,H(_.value,C=>(m(),w("div",{class:"app-item",onClick:Z=>$(C.downAppURL)},[n("img",{class:"icon",src:C.imgUrl},null,8,X),n("div",Y,f(C.appName),1)],8,z))),256))],512)],64)):M("v-if",!0)])],64)}}});export{ne as _};
