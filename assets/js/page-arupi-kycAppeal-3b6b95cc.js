import{G as R,r as N,av as fe,z as Q,A as O,B as ae,H as A,I as v,J as e,aA as S,P as a,O as f,Q as V,au as F,Z as oe,at as H,an as w,t as _e,u as b,aB as Y,aC as Z,N as u,q as le,K as X,M as ne,ao as P,aO as ye,aN as he,a8 as ie,C as re,aw as K,aE as W,F as de,aP as be,R as ke,$ as we}from"./common.modules-6670d68a.js";import{ad as ue,y as $e,ae as z,af as Ie,ag as se,_ as E,ak as ce,ai as Se,av as Ce,aw as xe,ax as Te}from"./page-activity-ActivityDetail-88cfafe3.js";import{V as J,P as Ue,u as Ne}from"./page-arupi-Appeal-fe5e569e.js";const Ve=g=>(Y("data-v-e498f2c8"),g=g(),Z(),g),Le={class:"updaloadImage"},Be={class:"img"},De={class:"title mb5 x-row x-row-between x-row-middle"},je=Ve(()=>e("span",null,"*",-1)),qe={class:"uploadImg x-row x-column x-row-middle-center"},Ae={class:"tip-p mt5 pb10"},Fe=["src"],Me={controls:""},Pe=["src"],Re=["src"],Ee=["src"],Oe=R({__name:"KycUploadImage",props:{fileListImg:{type:null,required:!0},readonly:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1}},emits:["update:fileListImg"],setup(g,{emit:_}){const r=g,{goMerchant:o}=ue(),I=N(!1),n=N(""),{fileListImg:y}=fe(r,_),{t:c}=Q(),C=$e(),x=O({baseUrl:"",signedUrl:""}),l=N(!1),T=N(!1),i=async(p,h)=>{const d=_e({message:c("upLoaderL"),forbidClick:!0,duration:0,overlay:!0}),k=Ie()+"."+se(p.file.type);try{const $=await Ue({objectName:k,contentType:p.file.type});$.code==="1"&&(x.baseUrl=$.data.baseUrl,x.signedUrl=$.data.signedUrl,await Ne(p,$.data.signedUrl)?(p.file.objectName=k,p.file.objectSuffix=se(p.file.type),(h==null?void 0:h.name)===2&&(n.value=k,I.value=!0)):(b($.msg),setTimeout(()=>{o()},1500)))}catch{}finally{d.close()}},D=ae(()=>[z("vsImg","jpg"),`${C.getOSSUrl}/vsvideo/vsVideo.mp4`]);return(p,h)=>{const d=A("van-image"),k=A("van-uploader"),$=A("van-icon");return u(),v("div",Le,[e("div",Be,[e("div",De,[e("h1",null,[je,S(" "+a(p.$t("sellTip13",[f(y).length])),1)]),e("div",{class:"right",onClick:h[0]||(h[0]=()=>l.value=!0)},a(p.$t("vsImg")),1)]),V(k,{disabled:p.disabled,"after-read":i,modelValue:f(y),"onUpdate:modelValue":h[1]||(h[1]=L=>oe(y)?y.value=L:null),"max-count":3,"max-size":5e3*1024,onOversize:h[2]||(h[2]=()=>f(le)(p.$t("sellTip14"))),accept:"image/*",readonly:p.readonly,name:1},{default:F(()=>[e("div",qe,[V(d,{width:"25",height:"25",fit:"cover",src:f(z)("updateImg")},null,8,["src"]),S(" "+a(p.$t("uploadImage")),1)])]),_:1},8,["disabled","modelValue","readonly"]),e("div",Ae,[V($,{name:"warning",color:"#F63E3E",class:"img"}),S(" "+a(p.$t("sellTip15")),1)])]),l.value?(u(),H(J,{key:0,show:l.value,"onUpdate:show":h[3]||(h[3]=L=>l.value=L)},{default:F(()=>[e("img",{src:D.value[0]},null,8,Fe)]),_:1},8,["show"])):w("v-if",!0),T.value?(u(),H(J,{key:1,show:T.value,"onUpdate:show":h[4]||(h[4]=L=>T.value=L)},{default:F(()=>[e("video",Me,[e("source",{src:D.value[1],type:"video/ogg"},null,8,Pe),e("source",{src:D.value[1],type:"video/mp4"},null,8,Re),e("source",{src:D.value[1],type:"video/webm"},null,8,Ee)])]),_:1},8,["show"])):w("v-if",!0)])}}});const Ke=E(Oe,[["__scopeId","data-v-e498f2c8"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/components/ArUPI/KycUploadImage.vue"]]),We={key:0,class:"item select mt8"},ze=["onClick"],Qe=["src"],Ge=R({__name:"BankList",props:{list:{type:null,required:!0,default:[]}},emits:["update:show","onSelect"],setup(g,{emit:_}){const r=(o,I)=>{_("onSelect",o,I)};return(o,I)=>o.list.length>0?(u(),v("div",We,[(u(!0),v(X,null,ne(o.list,(n,y)=>(u(),v("div",{class:P("x-row x-row-between bg"+n.bankCode),key:y,onClick:c=>r(n,y)},[e("span",null,a(n.bankName),1),e("img",{class:"img",src:f(z)(`kycbank/${n.bankCode}/1`)},null,8,Qe)],10,ze))),128))])):w("v-if",!0)}});const He=E(Ge,[["__scopeId","data-v-3a956fc4"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/components/ArUPI/BankList.vue"]]),Je=g=>(Y("data-v-9304bc2c"),g=g(),Z(),g),Ye={class:"x-send"},Ze={key:0,class:"x-send-lab"},Xe=Je(()=>e("span",{style:{color:"#EE4D4D"}},"*",-1)),et={class:"x-send-box"},tt=["placeholder"],st=R({__name:"SendMsg",props:{times:{type:Number,required:!0,default:60},apiFun:{type:Function,required:!0},code:{type:String,required:!1},isShowVerifyT:{type:Boolean,required:!1,default:!0},placeholderTip:{type:null,required:!1,default:"pcode"},way:{type:null,required:!0},type:{type:Number,required:!1},isTitle:{type:Boolean,required:!1,default:!1},btnTxt:{type:String,required:!1,default:"send"},bankCode:{type:String,required:!1},token:{type:null,required:!1}},emits:["update:code"],setup(g,{expose:_,emit:r}){const o=g,{t:I}=Q(),{onReady:n}=ce({type:3}),y=ye(o,"code",r),c=N(0),C=N(""),{pause:x,resume:l}=he(()=>{c.value<=0?x():c.value-=1},1e3,{immediate:!1,immediateCallback:!1}),T=ie(async()=>{if([0,2].includes(Number(o.type))&&!o.way)return b(I("sellTip71"));if(o.type===1&&!o.way)return b(I("sellTip72"));if(c.value===0){let d={};o.type==0?d.mobileNumber=o.way:o.type==1?d.emailAccount=o.way:o.type==2&&(d.phoneNumber=o.way,d.bankCode=o.bankCode,d.type=1,d.token=o.token);const k=await o.apiFun(d);k.code==="1"?(de(I("sendSuc")),c.value=o.times,l(),o.type==2&&(C.value=k.data)):b(k.msg)}else return},3e3),i=()=>{};return re(()=>{n()}),_({sendCode:T,kycMsg:C,clearTimer:()=>{c.value=0,x()},startTimer:()=>{c.value=o.times,l()},clearKycMsg:()=>{C.value=""}}),(d,k)=>(u(),v("div",Ye,[d.isTitle?(u(),v("label",Ze,[Xe,S(" "+a(d.$t("VerificationCode")),1)])):w("v-if",!0),e("div",et,[K(e("input",{class:"x-input input","onUpdate:modelValue":k[0]||(k[0]=$=>oe(y)?y.value=$:null),type:"text",placeholder:d.$t(d.placeholderTip),maxlength:"6",oninput:"value=value.replace(/\\D/g,'')"},null,8,tt),[[W,f(y)]]),e("div",{class:P(c.value===0?"btn action":"btn"),onClick:k[1]||(k[1]=(...$)=>f(T)&&f(T)(...$))},a(c.value===0?d.$t(d.btnTxt):`${c.value}S`),3)]),d.isShowVerifyT?(u(),v("p",{key:1,class:"x-send-tip",onClick:i},[S(a(d.$t("sellTip70")),1),e("span",null,a(d.$t("customerService")),1)])):w("v-if",!0)]))}});const at=E(st,[["__scopeId","data-v-9304bc2c"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/components/ArUPI/SendMsg.vue"]]),ot={key:0,class:"number"},lt=["src"],nt=R({__name:"statusStep",props:{type:{type:String,required:!0,default:"appeal"},active:{type:Number,required:!0,default:1},releaseOrderFlag:{type:Boolean,required:!1,default:!1}},setup(g){const _=g,{t:r}=Q(),o=[{title:_.type==="sellWait"?r("Matching"):"放单确认"},{title:_.type==="sellWait"?"放单确认":r("transfer")}],I=[{title:_.type==="sellWait"?r("Matching"):r("transfer")}],n=_.releaseOrderFlag?o:I,y=ae(()=>_.type==="appeal"?[{title:r("selltip4")},{title:r("Waiting")},{title:r("completed")}]:_.type==="matching"?[{title:r("Matching")},{title:r("ToBePaid")},{title:r("WaitingC")},{title:r("completed")}]:_.type==="kyc"?[{title:"Phone"},{title:"Send"},{title:"Finish"}]:[...n,{title:_.type==="buy"?r("uploadC"):r("ToBePaid")},{title:r("WaitingC")},{title:r("completed")}]);return(c,C)=>(u(),v("div",{class:P(["custom_step",{appealStyle:["appeal","kyc"].includes(c.type)}])},[(u(!0),v(X,null,ne(y.value,(x,l)=>(u(),v("div",{key:l,class:P(["item",{activeStyle:c.active<=l}])},[c.active<l?(u(),v("div",ot,a(l+1),1)):(u(),v("img",{key:1,src:f(z)("step"),class:"stepicon",alt:""},null,8,lt)),e("div",{class:P(["text",{activeColor:c.active<l}])},a(x.title),3)],2))),128))],2))}});const it=E(nt,[["__scopeId","data-v-8061aa51"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/components/ArUPI/statusStep.vue"]]),M=g=>(Y("data-v-629d4c42"),g=g(),Z(),g),rt={class:"x-appeal"},dt={key:0,class:"x-appeal-box"},ut={class:"appealTip"},ct={class:"title"},pt={key:0,class:"x-tc pt60"},mt={class:"mb5"},vt={class:"sub"},gt={key:1,class:"x-appeal-box"},ft={class:"tit mb4"},_t={class:"txt mb24"},yt=M(()=>e("br",null,null,-1)),ht=M(()=>e("br",null,null,-1)),bt={class:"item mb16"},kt=M(()=>e("h1",{class:"mb5"},[e("span",{style:{color:"#EE4D4D"}},"*"),S(" UTR(UPI Ref.ID) ")],-1)),wt=["placeholder"],$t={class:"item mb16"},It={class:"mb5"},St=M(()=>e("span",{style:{color:"#EE4D4D"}},"*",-1)),Ct=["readonly","placeholder"],xt={key:0,class:"item mb16"},Tt=M(()=>e("h1",{class:"mb5"},[e("span",{style:{color:"#EE4D4D"}},"*"),S(" UPI ID ")],-1)),Ut=["placeholder"],Nt={key:1,class:"item mb16"},Vt={class:"mb5"},Lt=M(()=>e("span",{style:{color:"#EE4D4D"}},"*",-1)),Bt={class:"uploadImg x-row x-column x-row-middle-center"},Dt={class:"x-row x-row-between x-row-middle fooder"},jt={key:2,class:"x-tc pt60 existAppeal"},qt={class:"mb5"},At=R({__name:"index",setup(g){const{goMerchant:_}=ue(),r=new be,o=N([]),{handleOpen:I}=ce({type:3}),{t:n}=Q(),y=ke(),{token:c}=y.currentRoute.value.query,C=O({title:n("buyAppeal")||"",pageIndex:1}),x=N(!1),l=O({bankList:[],pageId:1,msg:0}),T=N(""),i=O({upiName:"",upiId:"",verificationCode:"",bankCardNumber:"",bankCardOwner:"",bankCode:"",bankName:"",email:"",ifscCode:"",mobileNumber:"",type:3,utrVal:""}),D=N(!1),p=N(!1),h=async(t,s)=>{T.value=t.content},d=async()=>{const t=await Ce({token:c,source:2});t.code==="1"?l.bankList=t.data:b(t.msg)};re(()=>{d(),ge()});const k=t=>{C.title=t},$=t=>{C.pageIndex=t},L=N(),pe=(t,s)=>{const{bankName:B,bankCode:U}=t;i.bankName=B,i.bankCode=U,i.verificationCode="",l.pageId=2,$(2)},me=t=>{const s=t.match(/=([^&@]+@airtel)/);return s?s[1]:null},ee=ie(async()=>{const{mobileNumber:t,bankCode:s,verificationCode:B,utrVal:U,upiId:j}=i;if(!s)return b(n("pSelectKyc"));if(!U||U.length<12||!/^\d+$/.test(U))return b(n("formatIncorrect"));if(o.value.length<1)return b(n("sellTip15"));if(!t)return b(n("pphone"));if(l.msg==0&&t.length<8)return b(n("xg19"));if(i.bankCode==="airtel"){if(!j)return b(n("phEnterUPIID"));if(!T.value)return b(n("withdrawQrcodeTips"));try{const q=await r.decodeFromImageUrl(T.value);if(j!==me(q.text))return b(n("upiUploadImg"))}catch{return b(n("upiUploadImg"))}}if(l.msg==0)return l.msg=1;if(!B)return b(n("pcode"));ve()},500),ve=async()=>{const{mobileNumber:t,bankCode:s,verificationCode:B,utrVal:U,upiId:j}=i;let q=o.value.map(G=>{if(G.file&&G.file.objectName)return G.file.objectName});const m=await xe({upiId:j,bankCode:s,otp:B,phoneNumber:t,token:c,type:1,response:L.value.kycMsg,utr:U,images:q.join(",")});m.code==="1"?(de(n("xg22")),setTimeout(()=>{_()},1500)):b(m.msg)},ge=async()=>{const t=await Se({token:c});if(t.code==="1"){const{isLink:s,orderStatus:B,existAppeal:U,isAutoFlag:j=!0,url:q}=t.data;D.value=s,i.utrVal=q,!s&&U&&j&&(x.value=!0),U&&!x.value&&(p.value=!0),B==10&&!s&&_()}else b(t.msg),setTimeout(()=>{_()},1500)};we(()=>[C.pageIndex],()=>{l.pageId=C.pageIndex,l.msg=0,i.verificationCode="",i.mobileNumber="",k(C.pageIndex===1?n("buyAppeal"):n("xg91"))});function te(){y.push({name:"Recharge"})}return(t,s)=>{const B=A("NavBar"),U=A("van-skeleton"),j=A("van-image"),q=A("van-uploader");return u(),v("div",rt,[V(B,{title:f(n)("buyAppeal"),placeholder:!1,"left-arrow":"",onClickLeft:te},{right:F(()=>[e("div",{class:"sever x-row x-row-between x-row-middle-center",onClick:s[0]||(s[0]=(...m)=>f(I)&&f(I)(...m))},a(t.$t("customerService")),1)]),_:1},8,["title"]),l.pageId==1&&!p.value?(u(),v("div",dt,[e("div",ut,[e("div",ct,a(t.$t("xg84")),1),e("p",null,a(t.$t("xg85")),1),e("p",null,a(t.$t("xg86")),1),e("p",null,a(t.$t("xg87")),1)]),w(" 申诉中且还在连接状态 "),D.value?(u(),v("div",pt,[e("h2",mt,a(t.$t("orderAppealed")),1),e("h2",null,a(t.$t("orderWait")),1)])):(u(),v(X,{key:1},[w(" 如果没有申诉过或者断联 "),e("div",null,[e("h1",vt,a(t.$t("xg88")),1),w(` <p class="text">{{ $t('xg89') }}</p> `),V(U,{title:"",row:8,loading:!l.bankList.length},{default:F(()=>[V(He,{list:l.bankList,onOnSelect:pe},null,8,["list"])]),_:1},8,["loading"]),e("div",{class:"sub-enter",onClick:s[1]||(s[1]=m=>f(y).push({name:"Appeal"}))},a(t.$t("otherWllets")),1)])],2112)),w(` <div class="x-appeal-box-btn">\r
				<div @click="goAppeal">{{ $t('xg90') }}</div>\r
			</div> `)])):l.pageId!==1&&!p.value?(u(),v("div",gt,[V(it,{type:"kyc",active:l.msg,releaseOrderFlag:!1},null,8,["active"]),e("h3",ft,a(t.$t("welcomAuthorize"))+" "+a(i.bankName),1),e("p",_t,[S(a(t.$t("enjoyWork")),1),yt,S(" 1."+a(t.$t("enterYournumber",[i.bankName]))+";",1),ht,S(" 2."+a(t.$t("nextTip"))+".",1)]),e("div",bt,[kt,K(e("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=m=>i.utrVal=m),placeholder:t.$t("enterUtr"),maxlength:12},null,8,wt),[[W,i.utrVal,void 0,{trim:!0}]])]),V(Ke,{fileListImg:o.value,"onUpdate:fileListImg":s[3]||(s[3]=m=>o.value=m)},null,8,["fileListImg"]),e("div",$t,[e("h1",It,[St,S(" "+a(t.$t("phoneNumber")),1)]),K(e("input",{type:"text","onUpdate:modelValue":s[4]||(s[4]=m=>i.mobileNumber=m),readonly:!(l.bankList.length>0),placeholder:t.$t("pphone"),maxlength:10,oninput:"value=value.replace(/[^\\d]/g,'')"},null,8,Ct),[[W,i.mobileNumber,void 0,{trim:!0}]])]),i.bankCode==="airtel"?(u(),v("div",xt,[Tt,K(e("input",{type:"text","onUpdate:modelValue":s[5]||(s[5]=m=>i.upiId=m),placeholder:t.$t("phEnterUPIID"),maxlength:30},null,8,Ut),[[W,i.upiId,void 0,{trim:!0}]])])):w("v-if",!0),i.bankCode==="airtel"?(u(),v("div",Nt,[e("h1",Vt,[Lt,S(" "+a(t.$t("withdrawQrcode")),1)]),V(q,{"after-read":h,"max-count":1,"max-size":5e3*1024,onOversize:s[6]||(s[6]=()=>f(le)(t.$t("sellTip14"))),accept:"image/*",name:1},{default:F(()=>[e("div",Bt,[V(j,{width:"80",height:"80",fit:"cover",src:T.value},null,8,["src"]),S(" "+a(t.$t("uploadImage")),1)])]),_:1})])):w("v-if",!0),l.msg!=0?(u(),H(at,{key:2,class:"mt16",isShowVerifyT:!1,token:f(c),code:i.verificationCode,"onUpdate:code":s[7]||(s[7]=m=>i.verificationCode=m),type:2,way:i.mobileNumber,"api-fun":f(Te),ref_key:"smgFun",ref:L,isTitle:!0,times:60,"bank-code":i.bankCode},null,8,["token","code","way","api-fun","bank-code"])):w("v-if",!0),e("div",Dt,[e("div",{class:"cmdBth step mt32 flex1",onClick:te},a(t.$t("previousStep")),1),e("div",{class:"cmdBth active mt32 flex3",onClick:s[8]||(s[8]=(...m)=>f(ee)&&f(ee)(...m))},a(l.msg==0?t.$t("nextStep"):f(n)("xg91")),1)]),w(` <div class="cmdBth active mt32" @click="onRegister"> {{ pageData.msg ==0 ? $t('nextStep'):t('xg91') }}</div> `)])):w("v-if",!0),p.value?(u(),v("div",jt,[e("h2",qt,a(t.$t("orderAppeal")),1),e("h2",null,a(t.$t("orderWait")),1)])):w("v-if",!0),V(J,{onClose:s[9]||(s[9]=m=>p.value=!1),show:x.value,"onUpdate:show":s[10]||(s[10]=m=>x.value=m),auto:!0,"content-class":"arupiAppealTip",btnText:t.$t("resubmit")},{default:F(()=>[e("div",null,[e("h1",null,a(t.$t("tips")),1),e("p",null,a(t.$t("arupiAppealTip")),1)])]),_:1},8,["show","btnText"])])}}});const Ft=E(At,[["__scopeId","data-v-629d4c42"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/views/arupi/kycAppeal/index.vue"]]),Et=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"}));export{He as B,it as S,Et as i,at as s};
