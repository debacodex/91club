import{G,aP as H,z as J,R as Y,A as D,r as w,C as X,a8 as Z,u as d,$ as ee,H as N,I as h,Q as f,au as T,O as m,J as t,P as o,an as p,K as te,aA as b,aw as A,aE as B,at as se,aB as ae,aC as oe,F as ne,N as v,q as le}from"./common.modules-6670d68a.js";import{V as ie}from"./page-arupi-Appeal-fe5e569e.js";import{S as re,s as de,B as pe}from"./page-arupi-kycAppeal-3b6b95cc.js";import{ad as ce,ak as ue,ai as me,av as ve,ay as ge,ax as he,_ as be}from"./page-activity-ActivityDetail-88cfafe3.js";import"./page-turntable-assets-0cfb722e.js";import"./native/index-9800af95.js";import"./en-438265e0.js";const k=x=>(ae("data-v-c1c64bb8"),x=x(),oe(),x),fe={class:"x-appeal"},ke={key:0,class:"x-appeal-box"},_e={class:"appealTip"},ye={class:"title"},we={key:0,class:"x-tc pt60"},xe={class:"mb5"},Ie={class:"sub"},$e={key:1,class:"x-appeal-box"},Ce={class:"tit mb4"},Ne={class:"txt mb24"},Te=k(()=>t("br",null,null,-1)),Se=k(()=>t("br",null,null,-1)),De={class:"item mb16"},Ae=k(()=>t("h1",{class:"mb5"},[t("span",{style:{color:"#EE4D4D"}},"*"),b(" UTR(UPI Ref.ID) ")],-1)),Be=["placeholder"],Ve={class:"item mb16"},Ue={class:"mb5"},Ee=k(()=>t("span",{style:{color:"#EE4D4D"}},"*",-1)),Re=["readonly","placeholder"],Le={key:0,class:"item mb16"},Fe=k(()=>t("h1",{class:"mb5"},[t("span",{style:{color:"#EE4D4D"}},"*"),b(" UPI ID ")],-1)),Pe=["placeholder"],Oe={key:1,class:"item mb16"},Ke={class:"mb5"},Me=k(()=>t("span",{style:{color:"#EE4D4D"}},"*",-1)),je={class:"uploadImg x-row x-column x-row-middle-center"},qe={class:"x-row x-row-between x-row-middle fooder"},ze={key:2,class:"x-tc pt60 existAppeal"},Qe={class:"mb5"},We=G({__name:"index",setup(x){const P=new H,{goMerchant:S}=ce(),{handleOpen:V}=ue({type:3}),{t:l}=J(),U=Y(),{token:I}=U.currentRoute.value.query,_=D({title:l("buyAppeal")||"",pageIndex:1}),$=w(!1),i=D({bankList:[],pageId:1,msg:0}),C=w(""),a=D({upiName:"",upiId:"",verificationCode:"",bankCardNumber:"",bankCardOwner:"",bankCode:"",bankName:"",email:"",ifscCode:"",mobileNumber:"",type:3,utrVal:""}),E=w(!1),y=w(!1),O=async(e,s)=>{C.value=e.content},K=async()=>{const e=await ve({token:I,source:2});e.code==="1"?i.bankList=e.data:d(e.msg)};X(()=>{K(),W()});const M=e=>{_.title=e},j=e=>{_.pageIndex=e},R=w(),q=(e,s)=>{const{bankName:u,bankCode:r}=e;a.bankName=u,a.bankCode=r,a.verificationCode="",i.pageId=2,j(2)},z=e=>{const s=e.match(/=([^&@]+@airtel)/);return s?s[1]:null},L=Z(async()=>{const{mobileNumber:e,bankCode:s,verificationCode:u,utrVal:r,upiId:g}=a;if(!s)return d(l("pSelectKyc"));if(!r||r.length<12||!/^\d+$/.test(r))return d(l("formatIncorrect"));if(!e)return d(l("pphone"));if(i.msg==0&&e.length<8)return d(l("xg19"));if(a.bankCode==="airtel"){if(!g)return d(l("phEnterUPIID"));if(!C.value)return d(l("withdrawQrcodeTips"));try{const c=document.querySelector(".uploadImg img"),n=await P.decodeFromImageElement(c);if(g!==z(n.text))return d(l("upiUploadImg"))}catch(c){return console.error(c,C.value),d(l("upiUploadImg"))}}if(i.msg==0)return i.msg=1;if(!u)return d(l("pcode"));Q()},500),Q=async()=>{const{mobileNumber:e,bankCode:s,verificationCode:u,utrVal:r,upiId:g}=a,c=await ge({bankCode:s,otp:u,phoneNumber:e,token:I,type:1,response:R.value.kycMsg,utr:r,upiId:g});c.code==="1"?(ne(l("xg22")),setTimeout(()=>{S()},1500)):d(c.msg)},W=async()=>{const e=await me({token:I});if(e.code==="1"){const{isLink:s,orderStatus:u,existAppeal:r,isAutoFlag:g=!0,url:c}=e.data;E.value=s,a.utrVal=c,!s&&r&&g&&($.value=!0),r&&!$.value&&(y.value=!0),u==10&&!s&&S()}else d(e.msg),setTimeout(()=>{S()},1500)};ee(()=>[_.pageIndex],()=>{i.pageId=_.pageIndex,i.msg=0,a.verificationCode="",a.mobileNumber="",M(_.pageIndex===1?l("buyAppeal"):l("xg91"))});function F(){U.push({name:"Recharge"})}return(e,s)=>{const u=N("NavBar"),r=N("van-skeleton"),g=N("van-image"),c=N("van-uploader");return v(),h("div",fe,[f(u,{title:m(l)("arupiBank"),placeholder:!1,"left-arrow":"",onClickLeft:F},{right:T(()=>[t("div",{class:"sever x-row x-row-between x-row-middle-center",onClick:s[0]||(s[0]=(...n)=>m(V)&&m(V)(...n))},o(e.$t("customerService")),1)]),_:1},8,["title"]),i.pageId==1&&!y.value?(v(),h("div",ke,[t("div",_e,[t("div",ye,o(e.$t("arupiBank")),1),t("p",null,"1 "+o(e.$t("platformArrival"))+";",1),t("p",null,"2 "+o(e.$t("followingWallets"))+";",1),t("p",null,"3 "+o(e.$t("throughOTP"))+";",1)]),p(" 申诉中且还在连接状态 "),E.value?(v(),h("div",we,[t("h2",xe,o(e.$t("orderAppealed")),1),t("h2",null,o(e.$t("orderWait")),1)])):(v(),h(te,{key:1},[p(" 如果没有申诉过或者断联 "),t("div",null,[t("h1",Ie,o(e.$t("xg88")),1),p(` <p class="text">{{ $t('xg89') }}</p> `),f(r,{title:"",row:8,loading:!i.bankList.length},{default:T(()=>[f(pe,{list:i.bankList,onOnSelect:q},null,8,["list"])]),_:1},8,["loading"])])],2112)),p(` <div class="x-appeal-box-btn">\r
                <div @click="goAppeal">{{ $t('xg90') }}</div>\r
            </div> `)])):i.pageId!==1&&!y.value?(v(),h("div",$e,[f(re,{type:"kyc",active:i.msg,releaseOrderFlag:!1},null,8,["active"]),t("h3",Ce,o(e.$t("welcomAuthorize"))+" "+o(a.bankName),1),t("p",Ne,[b(o(e.$t("enjoyWork")),1),Te,b(" 1."+o(e.$t("enterYournumber",[a.bankName]))+";",1),Se,b(" 2."+o(e.$t("nextTip"))+".",1)]),t("div",De,[Ae,A(t("input",{type:"text","onUpdate:modelValue":s[1]||(s[1]=n=>a.utrVal=n),placeholder:e.$t("enterUtr"),maxlength:12},null,8,Be),[[B,a.utrVal,void 0,{trim:!0}]])]),t("div",Ve,[t("h1",Ue,[Ee,b(" "+o(e.$t("phoneNumber")),1)]),A(t("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=n=>a.mobileNumber=n),readonly:!(i.bankList.length>0),placeholder:e.$t("pphone"),maxlength:10,oninput:"value=value.replace(/[^\\d]/g,'')"},null,8,Re),[[B,a.mobileNumber,void 0,{trim:!0}]])]),a.bankCode==="airtel"?(v(),h("div",Le,[Fe,A(t("input",{type:"text","onUpdate:modelValue":s[3]||(s[3]=n=>a.upiId=n),placeholder:e.$t("phEnterUPIID"),maxlength:30},null,8,Pe),[[B,a.upiId,void 0,{trim:!0}]])])):p("v-if",!0),a.bankCode==="airtel"?(v(),h("div",Oe,[t("h1",Ke,[Me,b(" "+o(e.$t("withdrawQrcode")),1)]),f(c,{"after-read":O,"max-count":1,"max-size":5e3*1024,onOversize:s[4]||(s[4]=()=>m(le)(e.$t("sellTip14"))),accept:"image/*",name:1},{default:T(()=>[t("div",je,[f(g,{width:"80",height:"80",fit:"cover",src:C.value},null,8,["src"]),b(" "+o(e.$t("uploadImage")),1)])]),_:1})])):p("v-if",!0),i.msg!=0?(v(),se(de,{key:2,class:"mt16",isShowVerifyT:!1,token:m(I),code:a.verificationCode,"onUpdate:code":s[5]||(s[5]=n=>a.verificationCode=n),type:2,way:a.mobileNumber,"api-fun":m(he),ref_key:"smgFun",ref:R,isTitle:!0,times:60,"bank-code":a.bankCode},null,8,["token","code","way","api-fun","bank-code"])):p("v-if",!0),p(` <p class="mb5">* {{ $t('sellTip61') }}</p>\r
            <p>* {{ $t('sellTip62') }}</p> `),t("div",qe,[t("div",{class:"cmdBth step mt32 flex1",onClick:F},o(e.$t("previousStep")),1),t("div",{class:"cmdBth active mt32 flex3",onClick:s[6]||(s[6]=(...n)=>m(L)&&m(L)(...n))},o(i.msg==0?e.$t("nextStep"):m(l)("xg91")),1)]),p(` <div class="cmdBth active mt32" @click="onRegister"> {{ pageData.msg ==0 ? $t('nextStep'):t('xg91') }}</div> `)])):p("v-if",!0),y.value?(v(),h("div",ze,[t("h2",Qe,o(e.$t("orderAppeal")),1),t("h2",null,o(e.$t("orderWait")),1)])):p("v-if",!0),f(ie,{onClose:s[7]||(s[7]=n=>y.value=!1),show:$.value,"onUpdate:show":s[8]||(s[8]=n=>$.value=n),auto:!0,"content-class":"arupiAppealTip",btnText:e.$t("resubmit")},{default:T(()=>[t("div",null,[t("h1",null,o(e.$t("tips")),1),t("p",null,o(e.$t("arupiAppealTip")),1)])]),_:1},8,["show","btnText"])])}}});const tt=be(We,[["__scopeId","data-v-c1c64bb8"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/views/arupi/kycAppeal_v2/index.vue"]]);export{tt as default};
