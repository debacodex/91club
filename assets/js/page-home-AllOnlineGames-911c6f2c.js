import{G as Q,r as l,R as W,T as Z,$ as J,aS as X,aT as Y,C as ee,H as I,az as ae,I as v,Q as A,au as p,at as w,J as s,K as L,M as S,N as n,P as d,ao as h,aw as B,aE as te,O as f,an as se}from"./common.modules-6670d68a.js";import{i as ne,A as le,aF as oe,aG as ie,_ as ue}from"./page-activity-ActivityDetail-88cfafe3.js";import{F as ce,a as re}from"./page-home-AllGames-9a24cb19.js";import"./page-turntable-assets-0cfb722e.js";import"./native/index-9800af95.js";import"./en-438265e0.js";const ve={class:"onlineGames__container"},me=["placeholder"],_e={class:"onlineGames__container-list"},de=["onClick"],pe={key:1},fe={class:"onlineGames__container-list miniGames"},ye=["onClick"],ge=Q({__name:"index",setup(ke){const T=l(!1),U=W(),E=Z(),{onItemClick:$,getAllGame:q,homeState:R}=ne(),b=l(),m=l(0),y=l([]),_=l(0);J(m,a=>{const e=o.value[a];x.value=[],_.value=0,e&&D(e.slotsTypeID)});const r=l(!1);J(r,a=>{a?setTimeout(()=>{O.value.focus()},0):g.value=""});const g=l("");X(g,a=>{if(u.value)if(u.value.key==="fish"||u.value.key==="flash")o.value=o.value.filter(e=>e.gameNameEn.toLowerCase().includes(a)),a.length===0&&(o.value=sessionStorage.getItem("slotGamesList")?JSON.parse(sessionStorage.getItem("slotGamesList")):null);else{const e=o.value[m.value];D(e.slotsTypeID,a)}},{debounce:300});const O=l(null),u=l(),o=l([]),x=l([]),M=Y(x,a=>r.value?a.gameNameEn.toLowerCase().includes(g.value.toLowerCase()):a.customGameType===_.value);function H(a){return a?a.split(/(?=[A-Z])/).join(" "):""}function K(){U.go(-1)}function V(a){r.value=a}const P=()=>!T.value;async function D(a,e=""){if(!T.value){T.value=!0;try{const c=await le(oe({type:a,gameNameEn:e}));if(c){if(x.value=c.data.gameLists||[],y.value=c.data.gameCustomTypeLists||[],!y.value.length)return;_.value=y.value[0].customGameType}}catch{}finally{T.value=!1}}}return ee(async()=>{const a=E.query.game,e=E.query.vendorCode,c=sessionStorage.getItem("gameType")?JSON.parse(sessionStorage.getItem("gameType")):null;await q(),u.value=a||c,R.allGameList[u.value]&&(o.value=R.allGameList[u.value]);const G=JSON.parse(sessionStorage.getItem("clickedItem"));if(G||e){const N=o.value.findIndex(k=>e?k.vendorCode===e:k.slotsTypeID===G.slotsTypeID);m.value=N!==-1?N:0}b.value&&b.value.scrollTo(m.value);const C=o.value[m.value];C&&await D(C.slotsTypeID)}),(a,e)=>{var F,j;const c=I("svg-icon"),G=I("NavBar"),C=I("van-tab"),N=I("van-tabs"),k=ae("lazy");return n(),v("div",ve,[A(G,{class:"white","left-arrow":"",onClickLeft:K},{center:p(()=>{var t;return[s("span",{class:h({active:r.value})},d((t=u.value)==null?void 0:t.title)+d(a.$t("game")),3),B(s("input",{type:"text",placeholder:a.$t("searchGame"),class:h({active:r.value}),"onUpdate:modelValue":e[0]||(e[0]=i=>g.value=i),ref_key:"searchBarRef",ref:O},null,10,me),[[te,g.value]])]}),right:p(()=>[A(c,{name:"SearchTrx",onClick:e[1]||(e[1]=t=>V(!0)),class:h({active:r.value})},null,8,["class"]),s("span",{class:h({active:r.value}),onClick:e[2]||(e[2]=t=>V(!1))},d(a.$t("cancel")),3)]),_:1}),((F=u.value)==null?void 0:F.key)!=="fish"&&((j=u.value)==null?void 0:j.key)!=="flash"?(n(),w(N,{key:0,class:"onlineGames__container-tabBar",active:m.value,"onUpdate:active":e[4]||(e[4]=t=>m.value=t),type:"card",sticky:!0,"offset-top":46,ref_key:"tabsRef",ref:b,"before-change":P},{default:p(()=>[(n(!0),v(L,null,S(o.value,(t,i)=>(n(),w(C,{key:i},{title:p(()=>[A(c,{name:t.slotsName,class:"gameIcon"},null,8,["name"]),s("span",null,d(f(ie)(t.slotsName)),1)]),_:2},1024))),128)),!r.value||y.value.length===0?(n(),w(f(ce),{key:0,modelValue:_.value,"onUpdate:modelValue":e[3]||(e[3]=t=>_.value=t),lineWidth:0},{default:p(()=>[(n(!0),v(L,null,S(y.value,(t,i)=>(n(),w(f(re),{name:i,key:i,class:h([{activeClassName:_.value===t.customGameType}]),onClick:z=>_.value=t.customGameType},{default:p(()=>[s("span",null,d(t.customGameTypeName),1)]),_:2},1032,["name","class","onClick"]))),128))]),_:1},8,["modelValue"])):se("v-if",!0),s("div",_e,[(n(!0),v(L,null,S(f(M),(t,i)=>(n(),v("div",{class:"onlineGames__container-list__item",key:i,onClick:z=>f($)(t)},[B(s("img",null,null,512),[[k,t.img]]),s("div",null,[s("span",null,d(H(t.gameNameEn)),1)])],8,de))),128))])]),_:1},8,["active"])):(n(),v("div",pe,[s("div",fe,[(n(!0),v(L,null,S(o.value,(t,i)=>(n(),v("div",{class:"onlineGames__container-list__item",key:i,onClick:z=>f($)(t)},[B(s("img",null,null,512),[[k,t.img]]),s("div",null,[s("span",null,d(t.gameNameEn),1)])],8,ye))),128))])]))])}}});const we=ue(ge,[["__scopeId","data-v-0ffc3892"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/views/home/AllOnlineGames/index.vue"]]);export{we as default};
