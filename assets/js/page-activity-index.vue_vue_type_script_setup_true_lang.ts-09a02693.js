import{G as H,$ as j,r as c,z as re,R as ce,B as q,C as ue,aJ as de,H as h,az as ve,N as l,I as r,J as e,P as i,O as n,an as p,at as U,au as g,Q as _,ao as O,K as $,M as J,aw as A,aA as pe,V as he,aB as _e,aC as ye}from"./common.modules-6670d68a.js";import{a1 as fe,m as me,y as ge,a as we,i as ke,c as W,b as w,A as Ce,a2 as be,_ as De}from"./page-activity-ActivityDetail-88cfafe3.js";import{C as Ae}from"./page-activity-Championship-7b9fbb76.js";import{E as $e}from"./page-activity-Bonus-a2310b32.js";const Se=y=>(_e("data-v-4a7709f3"),y=y(),ye(),y),Te={class:"activity-wrapper"},Re={class:"activity-banner"},Be={class:"activity-bonus"},Ie={class:"activity-panel"},Pe={class:"msg-window"},Ue={class:"msg-header"},Oe={class:"msg-footer"},Le=Se(()=>e("div",{class:"nowidth"},null,-1)),Ee=["onClick"],Ne={class:"activity-panel-content"},xe={class:"content-para"},ze={class:"content-para"},Fe={key:0,class:"cardBox"},Ge={class:"activitySection__container"},Me=["onClick"],Ve=["src","onError"],je={class:"box-content"},qe={class:"box-title"},Je={class:"dialog-window"},We={class:"dialog-wrapper"},He={class:"dialog-title"},Ke={class:"dialog-para"},Qe=H({__name:"index",props:{activityList:{type:Array,default:()=>{}}},setup(y){const{getSelfCustomerServiceLink:L}=fe({ServerType:2}),{ActiveSotre:o,saveUserGuidelines:S,saveUserDayRequest:K,getDailyAwardCount:Q,allUnAwardCount:T,getActive:X}=me(),Y=ge(),{championEntranceV:R,championEntranceVO:E}=we(),{isOpenInvitedWheel:Z}=ke();j(()=>o.value.isOpenChampion,t=>{t==1&&R()});const k=c(!1);j(k,t=>{k.value&&R()});const N=c(!0),x=c(!0),z=c([]),{t:u}=re(),B=c(!1),I=c(!1),P=c(1),F=c(!1),v=ce(),G=q(()=>[{name:u("actTip1"),icon:"a1",goPath:"DailyTasks",noread:T.value,show:o.value.isOpenActivityAward},{name:u("invitationBonus"),icon:"a2",goPath:"InvitationBonus",noread:0,show:o.value.isTaskState},{name:u("laundryAmount"),icon:"a3",goPath:"Laundry",noread:0,show:o.value.isOpenWashCode},{name:u("superjackpot"),icon:"a4",goPath:"SuperJackpot",noread:o.value.unJackpotCount,show:o.value.isOpenJackpotReward},{name:u("newMenberPackage"),icon:"a5",goPath:"MemberPackage",noread:0,show:o.value.newMemberGiftPackageSwitch},{name:u("inviteWheel"),icon:"a6",goPath:"turntable",noread:0,show:Z.value}]),ee=q(()=>G.value.filter(t=>t.show).length);function te(t){let a;const{bannerID:d,jumpType:C,contents:m}=t;if(C==2){if(m.startsWith("/")){v.push({path:m});return}window.location.assign(m);return}else if(C==5)return L();switch(d){case 1:a="DailyTasks";break;case 2:a="PointMall";break;case 3:a="InvitationBonus";break;default:a="ActivityDetail";break}a=="ActivityDetail"?v.push({name:a,query:{id:d}}):a&&v.push({name:a})}const ae=(t,a)=>{t.bannerUrl=w("images","avatar"),he(()=>{let d=document.querySelector(`.act_${a}`);d.src=t.bannerUrl,d.style.objectFit="contain"})},f=t=>{v.push({name:t})},se=()=>{S(),f("DailyTasks")},M=()=>{x.value=!1,N.value=!1},V=(t=null)=>{K(),t&&(M(),f("DailyTasks"))},ne=async()=>{const t=await Ce(be({pageNo:P.value,pageSize:20}));t?(t.data.totalCount==0&&(F.value=!0),t.data.totalPage<=P.value&&(I.value=!0),t.data.list&&z.value.push(...t.data.list),P.value++):I.value=!0,B.value=!1};return ue(async()=>{await X(),o.value.isOpenActivityAward&&Q(),o.value.isOpenChampion==1&&R()}),de(()=>{x.value=!1,N.value=!1}),(t,a)=>{const d=h("van-icon"),C=h("van-popover"),m=h("van-badge"),oe=h("van-list"),ie=h("van-dialog"),b=ve("lazy");return l(),r("div",Te,[e("div",Re,[e("ul",Be,[e("li",null,[e("p",null,i(t.$t("todayRewards")),1),e("h3",null,i(n(W)(n(o).todayRewards)),1)]),e("li",null,[e("p",null,i(t.$t("totalRewards")),1),e("h3",null,i(n(W)(n(o).totalRewards)),1)])]),n(Y).getIsShowRewardCenter?(l(),r("div",{key:0,class:"bonus-button",onClick:a[0]||(a[0]=s=>n(v).push({name:"Bonus"}))},i(t.$t("bonusDetails")),1)):p("v-if",!0)]),e("div",Ie,[n(o).isFinishUserGuidelines&&n(o).isOpenActivityAward?(l(),U(C,{key:0,show:n(o).isFinishUserGuidelines,"onUpdate:show":a[1]||(a[1]=s=>n(o).isFinishUserGuidelines=s),overlay:!0,placement:"top-start","close-on-click-overlay":!1,onClose:M,class:"arPopover"},{reference:g(()=>[Le]),default:g(()=>[e("div",Pe,[e("div",Ue,i(t.$t("activityTip8")),1),e("div",Oe,[e("div",{onClick:se},[e("span",null,i(t.$t("dragonEntry")),1),_(d,{name:"arrow-double-right",color:"var(main-color)"})])])])]),_:1},8,["show"])):p("v-if",!0),e("div",{class:O(["activity-panel-header",["lg"+ee.value]])},[(l(!0),r($,null,J(G.value,s=>(l(),r($,null,[s.show?(l(),r("div",{key:0,class:"header-item",onClick:D=>f(s.goPath)},[_(m,{content:s.noread,max:"99","show-zero":s.noread>0,color:"#FA5B5B"},{default:g(()=>[e("div",{class:O([s.icon,"bgcontainer"])},null,2)]),_:2},1032,["content","show-zero"]),e("span",null,i(s.name),1)],8,Ee)):p("v-if",!0)],64))),256))],2),e("div",Ne,[e("div",{class:"content-title",onClick:a[2]||(a[2]=s=>f("RedeemGift"))},[A(e("img",null,null,512),[[b,n(w)("activity/DailyTask","signInBanner")]]),e("div",xe,i(t.$t("giftExchange")),1),e("p",null,i(t.$t("activityTip3")),1)]),e("div",{class:"content-title",onClick:a[3]||(a[3]=s=>f("DailySignIn"))},[A(e("img",null,null,512),[[b,n(w)("activity/DailyTask","giftRedeem")]]),e("div",ze,i(t.$t("code8007")),1),e("p",null,i(t.$t("activityTip4")),1)])])]),n(o).isOpenChampion==1?(l(),r("div",Fe,[_(Ae,{itemD:n(E),state:n(E).state,isRefresh:k.value,"onUpdate:isRefresh":a[4]||(a[4]=s=>k.value=s),bgImgWidth:"100%",bgImgHeight:"150px",onClick:a[5]||(a[5]=()=>n(v).push({name:"Championship"}))},null,8,["itemD","state","isRefresh"])])):p("v-if",!0),_(oe,{loading:B.value,"onUpdate:loading":a[6]||(a[6]=s=>B.value=s),finished:I.value,"finished-text":n(u)("noMoreThere"),onLoad:ne},{default:g(()=>[e("div",Ge,[(l(!0),r($,null,J(z.value,(s,D)=>(l(),r("div",{class:"box",key:D,onClick:le=>te(s)},[e("img",{src:s.bannerUrl,class:O(`act_${D}`),onError:le=>ae(s,D)},null,42,Ve),e("div",je,[e("div",qe,i(s.bannerTitle),1)])],8,Me))),128))])]),_:1},8,["loading","finished","finished-text"]),F.value?(l(),U($e,{key:1})):p("v-if",!0),n(T)>0&&n(o).isOpenActivityAward?(l(),U(ie,{key:2,show:n(o).isFirstUserDayRequest,"onUpdate:show":a[9]||(a[9]=s=>n(o).isFirstUserDayRequest=s),"show-confirm-button":!1,className:"noOverHidden"},{default:g(()=>[e("div",Je,[e("div",We,[A(e("img",null,null,512),[[b,n(w)("activity/DailyTask","present")]]),e("div",He,[pe(i(t.$t("activityTip5"))+" ",1),e("span",null,i(n(T)),1)]),e("div",Ke,i(t.$t("activityTip6")),1),e("div",{class:"dialog-btn",onClick:a[7]||(a[7]=s=>V(!0))},i(t.$t("activityTip7")),1),e("div",{class:"dialog-footer",onClick:a[8]||(a[8]=s=>V())},[A(e("img",null,null,512),[[b,n(w)("activity/DailyTask","close")]])])])])]),_:1},8,["show"])):p("v-if",!0)])}}});const Xe=De(Qe,[["__scopeId","data-v-4a7709f3"],["__file","/Users/juneqiu/Desktop/june/project/ar_v2_vue/src/components/Activity/Section/index.vue"]]),at=H({__name:"index",setup(y){return(L,o)=>{const S=h("NavBar");return l(),r($,null,[_(S,{class:"main",headLogo:!0}),_(Xe)],64)}}});export{at as _};
